<h1>Invoice #<%= @invoice.id %></h1>

<p>Status: <%= @invoice.status %></p>
<p>Created At: <%= @invoice.created_at.strftime("%A, %B %d, %Y") %></p>
<p>Customer: <%= Customer.find(@invoice.customer_id).first_name %> <%= Customer.find(@invoice.customer_id).last_name %></p>

<h3>Items:</h3>
<% @merchant.items_on_invoice(@invoice.id).each do |ii| %>
  <h4><%= ii.name %></h4>
  <p>Quantity: <%= ii.quantity %></p>
  <p>Unit Price: $<%= ii.price_to_dollars %></p>
  <% form_with model: ii, local: true do |f| %>
    <%= f.label :status %>
    <%= f.select :status, ['pending', 'packaged', 'shipped'] %>
    <%= f.submit 'Update Item Status' %>
  <% end %>
<% end %>

<p>Total Revenue: $<%= @invoice.total_revenue(params[:merchant_id]) %> </p>
